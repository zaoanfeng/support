# 监控邮件报文协议

## 报文格式

```json
{
    "client": "000000001",
    "customer": "wumart",
    "storeCode": "001",
    "sender": "client",
    "msgId": 23456,
    "releaseId": 12345,
    "data": [{
        "cmd": 1001,
        "version": "CentOS 7.4",
        "cpu": "core 2",
        "disk": "500G",
        "memory": "8G"
    }, {
        "cmd": 1002,
        "cpu": "25",
        "disk": "30",
        "memory": "40"
    }, { 
        "cmd": 1003,
        "type": "ap",
        "version": "3.3.0",
        "apid":"1",
        "online": true
    }, {
        "cmd": 1004,
        "type": "eslworking",
        "attchment": true
    }]
}
```

## 报文描述

| key       | 描述                                       |
| --------- | ---------------------------------------- |
| client    | 客户端的唯一编号，由客户机根据mac地址等信息自动生成              |
| customer  | 客户名                                      |
| storeCode | 门店编号，跟shopweb中值一致                        |
| sender    | 发送者， server：来自服务端的消息；client: 来自客户端的消息    |
| msgId     | 消息号                                      |
| releaseId | 关联消息号                                    |
| cmd       | 命令流，详细参考命令流定义                            |
| type      | 收集的应用名，包含：shopweb、eslworking、prismart、ap |
| version   | 版本号                                      |
| cpu       | cmd=1001：电脑的cpu信息； cmd=1002：cpu使用率       |
| disk      | cmd=1001：电脑的磁盘信息； cmd=1002：磁盘使用率         |
| memory    | cmd=1001：电脑的内存信息； cmd=1002：内存使用率         |
| online    | 当前应用的状态值 true或false                      |
| apid      | 仅当cmd=1003和type=ap时含有此属性， ap在当前门店的编号     |
| attchment | 邮件中是否包含附件，取值true或false                                          |

## 命令流定义

| 命令号（cmd） | 描述         |
| -------- | ---------- |
| 1001     | 获取操作软、硬件信息 |
| 1002     | 获取操作系统运行状态 |
| 1003     | 获取应用、基站信息  |
| 1004     | 获取错误日志     |
| 1005     | 客户端升级         |
